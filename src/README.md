# 📂 Папка `src/` — Исходный код программы

Привет! Эта папка содержит весь код нашего менеджера паролей. Давайте разберёмся, что здесь находится и как всё работает.

---

## 🗺️ Общая карта

```
src/
├── app.ts                          ← Главный мозг программы
├── types/                          ← Описание данных
│   └── index.ts
├── services/                       ← Хранение и шифрование
│   ├── password-service.ts
│   └── encrypted-password-service.ts
├── ui/                             ← Интерфейс (то, что вы видите)
│   ├── components.ts
│   └── password-manager-ui.ts
└── utils/                          ← Полезные функции
    └── password-generator.ts
```

---

## 🎯 Как работает программа (упрощённо)

Представьте ресторан:

| Роль | Файл | Что делает |
|------|------|------------|
| **Клиент** | Вы | Смотрите меню, выбираете блюда |
| **Официант** | `password-manager-ui.ts` | Показывает меню, принимает заказ |
| **Шеф-повар** | `app.ts` | Решает, как готовить заказ |
| **Кладовщик** | `encrypted-password-service.ts` | Хранит ингредиенты (пароли) в сейфе |
| **Помощник** | `password-generator.ts` | Готовит специи (генерирует пароли) |

---

## 📁 Что в каждой папке

### `app.ts` — Главный класс приложения

Это **координатор** всей программы. Он:

- Создаёт все остальные части (UI, сервисы)
- Решает, что делать, когда вы выбираете пункт меню
- Передаёт данные между экраном и хранилищем

**Простой пример:**
```typescript
// Когда вы нажимаете "Добавить пароль"
// app.ts просит UI показать форму
// Получает данные от вас
// Передаёт их в сервис для сохранения
// Показывает сообщение об успехе
```

---

### `types/` — Описание данных

Здесь хранятся **шаблоны** для данных. Это как чертежи — они описывают, как должны выглядеть пароли и другие объекты.

**Что такое тип?**

Представьте, что вы заполняете анкету. Тип — это правила заполнения:
- Имя: только буквы
- Возраст: только числа
- Email: должен содержать @

В программе типы помогают избежать ошибок — например, случайно записать число вместо текста.

---

### `services/` — Бизнес-логика

Сервисы — это **умные помощники**, которые выполняют конкретные задачи.

**`password-service.ts`** — описывает, что должен уметь сервис (интерфейс):
- Получить все пароли
- Добавить пароль
- Удалить пароль

**`encrypted-password-service.ts`** — реальная реализация:
- Шифрует пароли перед сохранением
- Расшифровывает при чтении
- Сохраняет в файл `passwords.dat`
- Проверяет мастер-пароль

**Почему два файла?**

Это как контракт и его исполнение:
- Интерфейс = договор "сервис должен уметь это"
- Реализация = фактическая работа

---

### `ui/` — Интерфейс пользователя

Всё, что вы **видите на экране**, создаётся здесь.

**`components.ts`** — строительные блоки:
- Функции для создания кнопок, полей ввода, меню
- Цветовая схема
- Подсказки для пользователя

**`password-manager-ui.ts`** — собранный интерфейс:
- Рисует главное меню
- Показывает формы для ввода
- Отображает список паролей
- Обрабатывает нажатия клавиш

---

### `utils/` — Вспомогательные функции

Маленькие **полезные инструменты**, которые используются в разных местах.

**`password-generator.ts`** — генератор паролей:
- Создаёт случайные пароли
- Использует криптографически безопасный генератор случайных чисел
- Позволяет настроить длину и символы

---

## 🔄 Как данные движутся по программе

### Сценарий: Сохранение нового пароля

```
┌─────────────────────────────────────────────────────────────┐
│ 1. ВЫ выбираете "Добавить пароль" в меню                    │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│ 2. UI (password-manager-ui.ts)                              │
│    Показывает форму для ввода                               │
│    • Поле для сервиса (google.com)                          │
│    • Поле для логина                                        │
│    • Поле для пароля                                        │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│ 3. Вы вводите данные и нажимаете Enter                      │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│ 4. App (app.ts) получает данные                             │
│    Проверяет, что все поля заполнены                        │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│ 5. Service (encrypted-password-service.ts)                  │
│    • Генерирует уникальный ID                               │
│    • Шифрует пароль алгоритмом AES-256-GCM                  │
│    • Сохраняет в Map (временное хранилище)                  │
│    • Записывает в файл passwords.dat                        │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│ 6. App сообщает UI, что всё готово                          │
└───────────────────────┬─────────────────────────────────────┘
                        │
                        ▼
┌─────────────────────────────────────────────────────────────┐
│ 7. UI показывает сообщение: "✓ Пароль сохранён"             │
└─────────────────────────────────────────────────────────────┘
```

---

## 🧩 Ключевые концепции для понимания

### 1. Интерфейс vs Класс

**Интерфейс** — это обещание:
```typescript
interface Кофемашина {
  сваритьКофе(): Кофе;
  налитьМолоко(): void;
}
```

**Класс** — это реальная машина, которая выполняет обещание:
```typescript
class PhilipsCoffeeMaker implements Кофемашина {
  сваритьКофе() { /* ... */ }
  налитьМолоко() { /* ... */ }
}
```

### 2. Map — хранилище данных

`Map` — это как шкафчик с ячейками. Каждая ячейка имеет ключ (метка) и значение:

```typescript
const passwords = new Map<string, PasswordEntry>();

// Добавляем пароль
passwords.set("id-123", { service: "google", password: "secret" });

// Получаем пароль
const entry = passwords.get("id-123");
```

### 3. Promise — работа с асинхронными операциями

`Promise` — это обещание, что операция завершится в будущем:

```typescript
// Получение паролей может занять время (чтение с диска)
async function loadPasswords(): Promise<PasswordEntry[]> {
  // ... читаем файл
  return passwords;
}

// Использование:
const passwords = await loadPasswords();
```

### 4. Bind — привязка контекста

Когда мы передаём функцию как параметр, она может потерять контекст `this`. `bind` решает эту проблему:

```typescript
// Без bind — this будет неправильным
this.menu.on('select', this.handleSelection);

// С bind — this будет правильным
this.menu.on('select', this.handleSelection.bind(this));
```

---

## 📚 Где узнать больше?

- [README в корне](../README.md) — общая информация о проекте
- README в каждой подпапке — подробности о конкретных модулях
- Комментарии прямо в коде — объяснения конкретных функций

---

**Готово! Теперь вы понимаете структуру проекта. Двигайтесь в подпапки для детального изучения каждой части.**